<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seller Dashboard | ShelfSync</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/dashboard.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        .dashboard-sidebar {
            background-color: #0f172a;
            /* Slightly darker for seller */
        }

        .stat-card h3 {
            color: var(--accent-color);
        }
    </style>
</head>

<body>

    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="dashboard-sidebar">
            <a href="../index.html" class="logo">
                <span>üìö Seller Portal</span>
            </a>
            <nav class="sidebar-nav">
                <a href="seller-dashboard.html" class="sidebar-link active">Overview</a>
                <a href="inventory.html" class="sidebar-link">My Inventory</a>
                <a href="seller-add-book.html" class="sidebar-link">Add New Book</a>
                <a href="seller-orders.html" class="sidebar-link">Orders</a>
                <a href="seller-earnings.html" class="sidebar-link">Earnings</a>
                <a href="seller-settings.html" class="sidebar-link">Settings</a>
                <a href="../index.html" class="sidebar-link"
                    style="margin-top: auto; color: var(--error-color);">Logout</a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <header class="dashboard-header">
                <div>
                    <h2>Seller Dashboard</h2>
                    <p id="welcomeMessage" class="text-light" style="margin: 0; font-size: 0.9rem;">Welcome back! Manage your inventory and track your sales.</p>
                </div>
                <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                    <a class="btn btn-primary" href="seller-add-book.html"
                        style="background-color: var(--accent-color);">+ Add New
                        Book</a>
                    <div
                        style="width: 40px; height: 40px; background-color: var(--accent-color); border-radius: 50%; color: white; display: flex; align-items: center; justify-content: center;"
                        title="Seller Profile">
                        S</div>
                </div>
            </header>

            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>$1,250</h3>
                    <p>Total Sales</p>
                    <small class="text-light">üí∞ Revenue earned</small>
                </div>
                <div class="stat-card">
                    <h3>45</h3>
                    <p>Books Sold</p>
                    <small class="text-light">üìö Units moved</small>
                </div>
                <div class="stat-card">
                    <h3>12</h3>
                    <p>Active Listings</p>
                    <small class="text-light">üìù Live inventory</small>
                </div>
                <div class="stat-card">
                    <h3>4.9</h3>
                    <p>Seller Rating</p>
                    <small class="text-light">‚≠ê Customer feedback</small>
                </div>
            </div>

            <!-- Recent Orders -->
            <h3 style="margin-bottom: var(--spacing-md);">Recent Orders</h3>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Order ID</th>
                            <th>Book</th>
                            <th>Customer</th>
                            <th>Date</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="recentOrdersBody"></tbody>
                </table>
            </div>
        </main>
    </div>

    <!-- Supabase Authentication Guard -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="../js/supabase.js"></script>
    <script src="../js/auth-guard.js"></script>
    <script src="../js/seller-dashboard.js"></script>
    <script>
        // Check seller authentication on page load
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('[Seller Dashboard] Page loaded, checking authentication...');
            try {
                const user = await checkAuthAndRole('seller');
                if (user) {
                    console.log('[Seller Dashboard] Authentication successful for user:', user.id);
                }
            } catch (error) {
                console.error('[Seller Dashboard] Authentication failed:', error);
            }
        });
    </script>

</body>

</html>